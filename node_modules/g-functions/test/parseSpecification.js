'use strict'

const assert = require('assert')
const rewire = require('rewire')
const specification = rewire('../lib/parseSpecification')

describe('parseArgs', function () {
  const parseArgs = specification.__get__('parseArgs')

  it(' ', function () {
    assert.deepEqual(
      parseArgs(' '),
      []
    )
  })

  it('value [ , start [ , end ] ]', function () {
    assert.deepEqual(
      parseArgs('value [ , start [ , end ] ]'),
      ['value', 'start', 'end']
    )
  })
})

describe('method', function () {
  const convertArgs = specification.__get__('convertArgs')

  it('Array.prototype.concat ( ...arguments )', function () {
    assert.deepEqual(
      convertArgs({
        args: ['arguments'],
        fragment: '#sec-array.prototype.concat',
        name: 'concat',
        object: 'Array'
      }),
      {
        args: ['args'],
        fragment: '#sec-array.prototype.concat',
        name: 'concat',
        object: 'Array'
      }
    )
  })

  it('Array.prototype.every ( callbackfn [ , thisArg] )', function () {
    assert.deepEqual(
      convertArgs({
        args: ['callbackfn', 'thisArg'],
        fragment: '#sec-array.prototype.every',
        name: 'every',
        object: 'Array'
      }),
      {
        args: ['callbackfn'],
        fragment: '#sec-array.prototype.every',
        name: 'every',
        object: 'Array'
      }
    )
  })
})
