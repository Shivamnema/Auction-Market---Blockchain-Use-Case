'use strict'

const generic = require('@nodeguy/generic')
const is = require('@nodeguy/type').is
const to = require('./to')

const sink = generic.create({name: 'sink'})

sink.method([is('AsyncIterable')],
  (asyncIterable) => {
    const input = to('Iterator', asyncIterable)

    const pull = () => {
      input.next().then(pull, pull)
    }

    pull()
  }
)

module.exports = sink
