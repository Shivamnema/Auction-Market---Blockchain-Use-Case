'use strict'

const generic = require('@nodeguy/generic')
const is = require('@nodeguy/type').is

const concat = generic.create({name: 'concat', curry: true})

concat.method((args) => (args.length > 1) && is('arguments', args[0]),
  function () {
    const first = Array.from(arguments[0])
    return first.concat.apply(first, Array.prototype.slice.call(arguments, 1))
  }
)

concat.method((args) => (args.length > 1) && is(Array, args[0]),
  function () {
    const args = Array.from(arguments)
    const first = args[0]

    const rest = args.slice(1).map((argument) =>
      is('arguments', argument) ? Array.from(argument) : argument
    )

    return first.concat.apply(first, rest)
  }
)

module.exports = concat
