'use strict'

const assert = require('assert')
const I = require('../lib')

it('converts an Iterable of promises into an AsyncIterable', function () {
  const iterable = I.map(
    Promise.resolve.bind(Promise),
    I.to('Iterable', [1, 2, 3])
  )

  return I.to(Array, I.pull(iterable)).then((value) => {
    assert.deepEqual(value, [1, 2, 3])
  })
})

it('pull an AsyncIterable of promise values into plain values', function () {
  const asyncIterable = I.to('AsyncIterable', I.map(
    Promise.resolve.bind(Promise),
    [1, 2, 3]
  ))

  return I.to(Array, I.pull(asyncIterable)).then((value) => {
    assert.deepEqual(value, [1, 2, 3])
  })
})
